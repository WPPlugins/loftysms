 $('#recipients').on('input', function () {
        updateNoRecipients();
    })

$('#message').on('keyup', function (event) {
    var length = $(this).val().length;

    var divisor = (length > 160) ? 140 : 160
    $('#divisor').text(divisor)
    var page_count = $('#page_count').text();
    var new_page_count = Math.ceil(length / divisor);

    if (new_page_count != page_count) {
        $('#page_count').text(new_page_count)
    }
    $('.char_count').text(length)
})

var updateNoRecipients = function () {
    var recipient_list = $('#recipients').val()
    var recipient_array = recipient_list.split(/[\s,:;]+/)
    var recipient_count = recipient_array.length

//            console.dir(recipient_count);

    $('#no_of_recipients').text(recipient_count)
}


var lookup = function (array, prop, value) {
        for (var i = 0, len = array.length; i < len; i++)
            if (array[i][prop] === parseInt(value)) return array[i];
    }
    </script>